{"ast":null,"code":"import _objectSpread from \"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/bea/Documents/bea/smart-money-pocket/src/components/Dashboard/dashboard.js\";\nimport React, { Component } from \"react\";\nimport DateRange from \"./components/DateRangePicker/dateRange\";\n\nclass Dashboard extends React.Component {\n  constructor() {\n    super();\n\n    this.getDateDiff = (dateDiff, startDay, endDay) => {\n      this.setState({\n        dateDiff: dateDiff,\n        startDay: startDay,\n        endDay: endDay\n      });\n      var tempData = [];\n      this.finalTable = [];\n      console.log(\"diff\", this.state.dateDiff);\n      console.log(\"start\", this.state.startDay);\n      console.log(\"end\", this.state.endDay);\n\n      if (endDay !== undefined) {\n        for (let i = 0; i < this.state.dateDiff; i++) {\n          tempData.push({\n            date: moment(this.state.startDay).format(\"DD.MM.YYYY\"),\n            entry: null,\n            attNote: null,\n            attachments: null\n          });\n          console.log(\"diff\", this.state.dateDiff);\n          console.log(\"a1\", [...tempData]);\n          this.setState({\n            tData: [...tempData]\n          });\n          console.log(\"a2\", this.state.tData); //for loop the real-time clicked data\n\n          if (startDay !== null) {\n            startDay.setDate(startDay.getDate() + 1);\n          } else {\n            let today = new Date();\n            return today;\n          }\n        }\n      } else {\n        tempData.push({\n          date: moment(this.state.startDay).format(\"DD.MM.YYYY\"),\n          entry: null,\n          attNote: null,\n          attachments: null\n        });\n        console.log(\"a1\", [...tempData]);\n        this.setState({\n          tData: [...tempData]\n        });\n        console.log(\"a2\", this.state.tData);\n      }\n\n      this.attendance = [];\n      let match;\n      let cloneData = [...this.state.tData]; //to map the function\n\n      let realDates = this.state.tData.map((realDate, i) => {\n        match = this.state.user.attendance.filter(val => {\n          return val.date === realDate.date;\n        });\n        console.log(\"realClick\", realDate.date);\n\n        if (match.length > 0) {\n          cloneData[i] = _objectSpread({}, match[0]);\n          this.setState({\n            tData: [...cloneData]\n          });\n          console.log(\"final dummy data\", [...this.state.tData]);\n        }\n\n        let selectEntryTimeResult;\n\n        if (this.state.user.role == \"trainer\") {\n          selectEntryTimeResult = React.createElement(EntryTimeSelect, {\n            onSave: this.HandleEnterTimeReset,\n            onChange: this.HandleEnterTimeReset,\n            entry: this.state.tData[i].entry,\n            value: realDate.date //to match the rel click to the cliked date\n            ,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 209\n            },\n            __self: this\n          });\n        } else if (this.state.user.role == \"manager\") {\n          selectEntryTimeResult = React.createElement(EntryTimeSelect, {\n            onSave: this.HandleEnterTimeReset,\n            onChange: this.HandleEnterTimeReset,\n            entry: this.state.tData[i].entry,\n            value: realDate.date //to match the rel click to the cliked date\n            ,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218\n            },\n            __self: this\n          });\n        } else {\n          selectEntryTimeResult = this.state.tData[i].entry;\n        }\n\n        let studentNoteResult;\n\n        if (this.state.user.role == \"attendee\") {\n          studentNoteResult = React.createElement(AttendenceNote, {\n            onClick: this.HandleAttendenceNote,\n            onClose: this.HandleAttendenceNote,\n            onChange: this.HandleAttendenceNote,\n            attNote: this.state.tData[i].attNote,\n            onCancel: this.HandleAttendenceNote,\n            value: realDate.date //from getDateDiff event\n            ,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232\n            },\n            __self: this\n          });\n        } else {\n          studentNoteResult = this.state.tData[i].attNote;\n        }\n\n        let uploadResult;\n\n        if (this.state.user.role == \"attendee\") {\n          uploadResult = React.createElement(Upload, {\n            onClick: this.HandleAttachment,\n            onChange: this.HandleAttachment,\n            attachments: this.state.tData[i].attachments,\n            value: realDate.date,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248\n            },\n            __self: this\n          });\n        } else if (this.state.user.role == \"trainer\") {\n          uploadResult = React.createElement(Upload, {\n            onClick: this.HandleAttachment,\n            onChange: this.HandleAttachment,\n            attachments: this.state.tData[i].attachments,\n            value: realDate.date,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257\n            },\n            __self: this\n          });\n        } else if (this.state.user.role == \"manager\") {\n          uploadResult = React.createElement(Upload, {\n            onClick: this.HandleAttachment,\n            onChange: this.HandleAttachment,\n            attachments: this.state.tData[i].attachments,\n            value: realDate.date,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 266\n            },\n            __self: this\n          });\n        } else {\n          uploadResult = this.state.tData[i].attachments;\n        }\n\n        this.finalTable.push(React.createElement(\"tr\", {\n          key: i,\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }, this.state.tData[i].date, \" \"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, selectEntryTimeResult), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, studentNoteResult), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, uploadResult))); // startDay.setDate(startDay.getDate() + 1);\n\n        this.setState({\n          catchDate: true\n        });\n        console.log(\"realDate\", realDate.date);\n      });\n    };\n\n    this.studentTable = [];\n\n    let _today = new Date(),\n        date = _today.getFullYear() + \"-\" + (_today.getMonth() + 1) + \"-\" + _today.getDate();\n\n    this.state = {\n      tData: [],\n      selectedStudent: \"\",\n      studentList: [],\n      selectStudentTable: [],\n      date: date,\n      entry: \"\",\n      exit: \"\",\n      startDay: \"\",\n      endDay: \"\",\n      dateDiff: \"\",\n      attNote: \"\",\n      trainerNote: \"\",\n      attachments: \"\",\n      status: \"\",\n      hours1: \"\",\n      min1: \"\",\n      hours2: \"\",\n      min2: \"\",\n      sec1: \"\",\n      sec2: \"\",\n      timeDiff: \"\",\n      catchDate: false\n    };\n    this.getDateDiff = this.getDateDiff.bind(this);\n    this.HandleEnterTimeReset = this.HandleEnterTimeReset.bind(this);\n    this.HandleAttendenceNote = this.HandleAttendenceNote.bind(this);\n    this.HandleAttachment = this.HandleAttachment.bind(this);\n  } //   componentDidMount() {\n  //     axios({\n  //       method: \"get\",\n  //       url: \"https://attrc.herokuapp.com/api/dashboard/\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //         \"x-auth-token\": localStorage.getItem(\"jwtToken\")\n  //       }\n  //     }).then(res => {\n  //       const user = res.data.result.user;\n  //       console.log(user);\n  //       this.setState({ user: user });\n  //       console.log(this.state.user);\n  //     });\n  //   }\n\n\n  HandleEnterTimeReset(val, date) {\n    //selected entrytime\n    let entry = val;\n    console.log(\"entry time\", entry); //selected date\n\n    let entryDate = date;\n    console.log(\"entry time date\", entryDate);\n    let matchArr = [];\n    let entryDates = this.state.tData.map(entryDate => {\n      var entryDate = date;\n      console.log(entryDate);\n      matchArr = this.state.user.attendance.filter(val => {\n        return val.date === entryDate;\n      });\n\n      if (matchArr.length > 0) {\n        matchArr[0].entry = entry;\n        this.setState({\n          attendance: [...matchArr]\n        });\n      }\n\n      console.log(\"Entry reset matchArr\", matchArr);\n      console.log(\"this.state.user.entry\", this.state.tData);\n    });\n    this.setState({\n      entry: entry //to reset the entrytime to the state and send it to the trainer entry time\n\n    });\n  }\n\n  HandleAttendenceNote(val, date) {\n    var attNote = val;\n    console.log(\"attNote val\", attNote); //pass the selected date from textedit from child component\n\n    var attDate = date;\n    console.log(\"attNote val selected date\", attDate);\n    let matchArr = [];\n    let attDates = this.state.tData.map((attDate, i) => {\n      var attDate = date;\n      console.log(attDate);\n      matchArr = this.state.user.attendance.filter((val, i) => {\n        return val.date === attDate;\n      });\n      console.log(\"matchArr attNote update\", matchArr);\n\n      if (matchArr.length > 0) {\n        matchArr[0].attNote = attNote;\n        this.setState({\n          attendance: [...matchArr],\n          attNote: attNote\n        });\n      }\n    });\n  }\n\n  HandleAttachment(val, date) {\n    let attachments = val;\n    console.log(\"attachment value\", attachments);\n    var fileDate = date;\n    console.log(\"attachment date\", fileDate);\n    let matchArr;\n    let fileDates = this.state.tData.map((fileDate, i) => {\n      matchArr = this.state.user.attendance.filter((val, i) => {\n        return val.date === fileDate;\n      });\n      console.log(\"attachment final matchArr\", matchArr);\n\n      if (matchArr.length > 0) {\n        matchArr[0].attachments = attachments;\n        this.setState({\n          attendance: [...matchArr],\n          attachments: attachments\n        });\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"dashboard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"Select your spending history here\"), React.createElement(DateRange, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, this.finalTable));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/home/bea/Documents/bea/smart-money-pocket/src/components/Dashboard/dashboard.js"],"names":["React","Component","DateRange","Dashboard","constructor","getDateDiff","dateDiff","startDay","endDay","setState","tempData","finalTable","console","log","state","undefined","i","push","date","moment","format","entry","attNote","attachments","tData","setDate","getDate","today","Date","attendance","match","cloneData","realDates","map","realDate","user","filter","val","length","selectEntryTimeResult","role","HandleEnterTimeReset","studentNoteResult","HandleAttendenceNote","uploadResult","HandleAttachment","catchDate","studentTable","getFullYear","getMonth","selectedStudent","studentList","selectStudentTable","exit","trainerNote","status","hours1","min1","hours2","min2","sec1","sec2","timeDiff","bind","entryDate","matchArr","entryDates","attDate","attDates","fileDate","fileDates","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport DateRange from \"./components/DateRangePicker/dateRange\";\n\nclass Dashboard extends React.Component {\n  constructor() {\n    super();\n    this.studentTable = [];\n    let today = new Date(),\n      date =\n        today.getFullYear() +\n        \"-\" +\n        (today.getMonth() + 1) +\n        \"-\" +\n        today.getDate();\n\n    this.state = {\n      tData: [],\n      selectedStudent: \"\",\n      studentList: [],\n      selectStudentTable: [],\n      date: date,\n      entry: \"\",\n      exit: \"\",\n      startDay: \"\",\n      endDay: \"\",\n      dateDiff: \"\",\n      attNote: \"\",\n      trainerNote: \"\",\n      attachments: \"\",\n      status: \"\",\n      hours1: \"\",\n      min1: \"\",\n      hours2: \"\",\n      min2: \"\",\n      sec1: \"\",\n      sec2: \"\",\n      timeDiff: \"\",\n      catchDate: false\n    };\n\n    this.getDateDiff = this.getDateDiff.bind(this);\n    this.HandleEnterTimeReset = this.HandleEnterTimeReset.bind(this);\n    this.HandleAttendenceNote = this.HandleAttendenceNote.bind(this);\n    this.HandleAttachment = this.HandleAttachment.bind(this);\n  }\n\n  //   componentDidMount() {\n  //     axios({\n  //       method: \"get\",\n  //       url: \"https://attrc.herokuapp.com/api/dashboard/\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //         \"x-auth-token\": localStorage.getItem(\"jwtToken\")\n  //       }\n  //     }).then(res => {\n  //       const user = res.data.result.user;\n  //       console.log(user);\n  //       this.setState({ user: user });\n  //       console.log(this.state.user);\n  //     });\n  //   }\n\n  HandleEnterTimeReset(val, date) {\n    //selected entrytime\n    let entry = val;\n    console.log(\"entry time\", entry);\n\n    //selected date\n    let entryDate = date;\n    console.log(\"entry time date\", entryDate);\n\n    let matchArr = [];\n    let entryDates = this.state.tData.map(entryDate => {\n      var entryDate = date;\n      console.log(entryDate);\n      matchArr = this.state.user.attendance.filter(val => {\n        return val.date === entryDate;\n      });\n      if (matchArr.length > 0) {\n        matchArr[0].entry = entry;\n        this.setState({ attendance: [...matchArr] });\n      }\n      console.log(\"Entry reset matchArr\", matchArr);\n      console.log(\"this.state.user.entry\", this.state.tData);\n    });\n\n    this.setState({\n      entry: entry //to reset the entrytime to the state and send it to the trainer entry time\n    });\n  }\n\n  HandleAttendenceNote(val, date) {\n    var attNote = val;\n    console.log(\"attNote val\", attNote);\n\n    //pass the selected date from textedit from child component\n    var attDate = date;\n    console.log(\"attNote val selected date\", attDate);\n\n    let matchArr = [];\n    let attDates = this.state.tData.map((attDate, i) => {\n      var attDate = date;\n      console.log(attDate);\n      matchArr = this.state.user.attendance.filter((val, i) => {\n        return val.date === attDate;\n      });\n      console.log(\"matchArr attNote update\", matchArr);\n\n      if (matchArr.length > 0) {\n        matchArr[0].attNote = attNote;\n        this.setState({ attendance: [...matchArr], attNote: attNote });\n      }\n    });\n  }\n\n  HandleAttachment(val, date) {\n    let attachments = val;\n    console.log(\"attachment value\", attachments);\n\n    var fileDate = date;\n    console.log(\"attachment date\", fileDate);\n\n    let matchArr;\n    let fileDates = this.state.tData.map((fileDate, i) => {\n      matchArr = this.state.user.attendance.filter((val, i) => {\n        return val.date === fileDate;\n      });\n      console.log(\"attachment final matchArr\", matchArr);\n\n      if (matchArr.length > 0) {\n        matchArr[0].attachments = attachments;\n\n        this.setState({\n          attendance: [...matchArr],\n          attachments: attachments\n        });\n      }\n    });\n  }\n\n  getDateDiff = (dateDiff, startDay, endDay) => {\n    this.setState({\n      dateDiff: dateDiff,\n      startDay: startDay,\n      endDay: endDay\n    });\n    var tempData = [];\n\n    this.finalTable = [];\n    console.log(\"diff\", this.state.dateDiff);\n    console.log(\"start\", this.state.startDay);\n    console.log(\"end\", this.state.endDay);\n\n    if (endDay !== undefined) {\n      for (let i = 0; i < this.state.dateDiff; i++) {\n        tempData.push({\n          date: moment(this.state.startDay).format(\"DD.MM.YYYY\"),\n          entry: null,\n          attNote: null,\n          attachments: null\n        });\n        console.log(\"diff\", this.state.dateDiff);\n        console.log(\"a1\", [...tempData]);\n        this.setState({\n          tData: [...tempData]\n        });\n        console.log(\"a2\", this.state.tData);\n        //for loop the real-time clicked data\n        if (startDay !== null) {\n          startDay.setDate(startDay.getDate() + 1);\n        } else {\n          let today = new Date();\n          return today;\n        }\n      }\n    } else {\n      tempData.push({\n        date: moment(this.state.startDay).format(\"DD.MM.YYYY\"),\n        entry: null,\n        attNote: null,\n        attachments: null\n      });\n      console.log(\"a1\", [...tempData]);\n      this.setState({\n        tData: [...tempData]\n      });\n      console.log(\"a2\", this.state.tData);\n    }\n\n    this.attendance = [];\n    let match;\n    let cloneData = [...this.state.tData];\n    //to map the function\n    let realDates = this.state.tData.map((realDate, i) => {\n      match = this.state.user.attendance.filter(val => {\n        return val.date === realDate.date;\n      });\n      console.log(\"realClick\", realDate.date);\n\n      if (match.length > 0) {\n        cloneData[i] = { ...match[0] };\n        this.setState({ tData: [...cloneData] });\n        console.log(\"final dummy data\", [...this.state.tData]);\n      }\n\n      let selectEntryTimeResult;\n      if (this.state.user.role == \"trainer\") {\n        selectEntryTimeResult = (\n          <EntryTimeSelect\n            onSave={this.HandleEnterTimeReset}\n            onChange={this.HandleEnterTimeReset}\n            entry={this.state.tData[i].entry}\n            value={realDate.date} //to match the rel click to the cliked date\n          />\n        );\n      } else if (this.state.user.role == \"manager\") {\n        selectEntryTimeResult = (\n          <EntryTimeSelect\n            onSave={this.HandleEnterTimeReset}\n            onChange={this.HandleEnterTimeReset}\n            entry={this.state.tData[i].entry}\n            value={realDate.date} //to match the rel click to the cliked date\n          />\n        );\n      } else {\n        selectEntryTimeResult = this.state.tData[i].entry;\n      }\n\n      let studentNoteResult;\n      if (this.state.user.role == \"attendee\") {\n        studentNoteResult = (\n          <AttendenceNote\n            onClick={this.HandleAttendenceNote}\n            onClose={this.HandleAttendenceNote}\n            onChange={this.HandleAttendenceNote}\n            attNote={this.state.tData[i].attNote}\n            onCancel={this.HandleAttendenceNote}\n            value={realDate.date} //from getDateDiff event\n          />\n        );\n      } else {\n        studentNoteResult = this.state.tData[i].attNote;\n      }\n\n      let uploadResult;\n      if (this.state.user.role == \"attendee\") {\n        uploadResult = (\n          <Upload\n            onClick={this.HandleAttachment}\n            onChange={this.HandleAttachment}\n            attachments={this.state.tData[i].attachments}\n            value={realDate.date}\n          />\n        );\n      } else if (this.state.user.role == \"trainer\") {\n        uploadResult = (\n          <Upload\n            onClick={this.HandleAttachment}\n            onChange={this.HandleAttachment}\n            attachments={this.state.tData[i].attachments}\n            value={realDate.date}\n          />\n        );\n      } else if (this.state.user.role == \"manager\") {\n        uploadResult = (\n          <Upload\n            onClick={this.HandleAttachment}\n            onChange={this.HandleAttachment}\n            attachments={this.state.tData[i].attachments}\n            value={realDate.date}\n          />\n        );\n      } else {\n        uploadResult = this.state.tData[i].attachments;\n      }\n\n      this.finalTable.push(\n        <tr key={i} align=\"center\">\n          <td>{this.state.tData[i].date} </td>\n          <td>{selectEntryTimeResult}</td>\n          <td>{studentNoteResult}</td>\n          <td>{uploadResult}</td>\n        </tr>\n      );\n\n      // startDay.setDate(startDay.getDate() + 1);\n      this.setState({\n        catchDate: true\n      });\n      console.log(\"realDate\", realDate.date);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"dashboard\">\n        <h6>Select your spending history here</h6>\n        <DateRange></DateRange>\n        <td>{this.finalTable}</td>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}