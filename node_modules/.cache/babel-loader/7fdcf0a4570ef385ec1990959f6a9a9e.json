{"ast":null,"code":"import _objectSpread from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import DateRange from\"./dateRangePicker\";import Note from\"./note\";import moment from\"moment\";// import axios from \"axios\";\nvar Dashboard=/*#__PURE__*/function(_React$Component){_inherits(Dashboard,_React$Component);function Dashboard(){var _this;_classCallCheck(this,Dashboard);_this=_possibleConstructorReturn(this,_getPrototypeOf(Dashboard).call(this));_this.getDateDiff=function(dateDiff,startDate,endDate){_this.setState({dateDiff:dateDiff,startDate:startDate,endDate:endDate});var tempData=[];_this.finalTable=[];console.log(\"diff\",_this.state.dateDiff);console.log(\"start\",_this.state.startDate);console.log(\"end\",_this.state.endDate);if(endDate!==undefined){for(var i=0;i<_this.state.dateDiff;i++){tempData.push({date:moment(_this.state.startDate).format(\"DD.MM.YYYY\"),entry:null,note:null,attachments:null});console.log(\"diff\",_this.state.dateDiff);console.log(\"a1\",[].concat(tempData));_this.setState({tData:[].concat(tempData)});console.log(\"a2\",_this.state.tData);//for loop the real-time clicked data\nif(startDate!==null){startDate.setDate(startDate.getDate()+1);}else{var today=new Date();return today;}}}else{tempData.push({date:moment(_this.state.startDate).format(\"DD.MM.YYYY\"),entry:null,note:null,attachments:null});console.log(\"a1\",[].concat(tempData));_this.setState({tData:[].concat(tempData)});console.log(\"a2\",_this.state.tData);}_this.attendance=[];var match;var cloneData=_toConsumableArray(_this.state.tData);//to map the function\nvar realDates=_this.state.tData.map(function(realDate,i){match=_this.state.user.attendance.filter(function(val){return val.date===realDate.date;});console.log(\"realClick\",realDate.date);if(match.length>0){cloneData[i]=_objectSpread({},match[0]);_this.setState({tData:_toConsumableArray(cloneData)});console.log(\"final dummy data\",_toConsumableArray(_this.state.tData));}// let selectEntryTimeResult;\n// if (this.state.user.role == \"trainer\") {\n//   selectEntryTimeResult = (\n//     <EntryTimeSelect\n//       onSave={this.HandleEnterTimeReset}\n//       onChange={this.HandleEnterTimeReset}\n//       entry={this.state.tData[i].entry}\n//       value={realDate.date} //to match the rel click to the cliked date\n//     />\n//   );\n// } else if (this.state.user.role == \"manager\") {\n//   selectEntryTimeResult = (\n//     <EntryTimeSelect\n//       onSave={this.HandleEnterTimeReset}\n//       onChange={this.HandleEnterTimeReset}\n//       entry={this.state.tData[i].entry}\n//       value={realDate.date} //to match the rel click to the cliked date\n//     />\n//   );\n// } else {\n//   selectEntryTimeResult = this.state.tData[i].entry;\n// }\nvar noteResult;noteResult=React.createElement(Note,{onClick:_this.HandleNote,onClose:_this.HandleNote,onChange:_this.HandleNote,note:_this.state.tData[i].note,onCancel:_this.HandleNote,value:realDate.date//from getDateDiff event\n});// let uploadResult;\n// if (this.state.user.role == \"attendee\") {\n//   uploadResult = (\n//     <Upload\n//       onClick={this.HandleAttachment}\n//       onChange={this.HandleAttachment}\n//       attachments={this.state.tData[i].attachments}\n//       value={realDate.date}\n//     />\n//   );\n// } else if (this.state.user.role == \"trainer\") {\n//   uploadResult = (\n//     <Upload\n//       onClick={this.HandleAttachment}\n//       onChange={this.HandleAttachment}\n//       attachments={this.state.tData[i].attachments}\n//       value={realDate.date}\n//     />\n//   );\n// } else if (this.state.user.role == \"manager\") {\n//   uploadResult = (\n//     <Upload\n//       onClick={this.HandleAttachment}\n//       onChange={this.HandleAttachment}\n//       attachments={this.state.tData[i].attachments}\n//       value={realDate.date}\n//     />\n//   );\n// } else {\n//   uploadResult = this.state.tData[i].attachments;\n// }\n_this.finalTable.push(React.createElement(\"figcaption\",{style:{width:\"20vw\",height:\"40vh\",border:\"1px solid grey\",margin:\"1%\",alignItems:\"center\",borderRadius:\"10px\"}},React.createElement(\"div\",null,_this.state.tData[i].date),React.createElement(\"div\",{style:{width:\"20\",height:\"70%\",margin:\"1%\"}},noteResult)));// startDate.setDate(startDate.getDate() + 1);\n_this.setState({catchDate:true});console.log(\"realDate\",realDate.date);});};_this.studentTable=[];var _today=new Date(),date=_today.getFullYear()+\"-\"+(_today.getMonth()+1)+\"-\"+_today.getDate();_this.state={user:{//trainer self\nfirstname:\"\",lastname:\"\",email:\"\",attendance:[{date:\"01.02.2020\",entry:\"10:39 am\",exit:\"04:45 pm\",note:\"train\",attachments:[]},{date:\"02.02.2020\",entry:\"12:00 am\",exit:\"17:00 am\",note:\"transpotation\",attachments:[]},{date:\"03.02.2020\",entry:\"11:00 am\",exit:\"13:00 am\",note:\"shisha\",attachments:\"03.02.2020_1.jpg\",alert:null},{date:\"04.02.2020\",entry:null,exit:null,note:\"transpotation\",attachments:[]},{date:\"05.02.2020\",entry:\"08:00 am\",exit:\"16:00 am\",note:\"transpotation\",attachments:[]},{date:\"06.02.2020\",entry:\"08:00 am\",exit:\"16:00 am\",note:\"transpotation\",attachments:[]},{date:\"07.02.2020\",entry:\"08:00 am\",exit:\"16:00 am\",note:\"transpotation\",attachments:[]},{date:\"08.02.2020\",entry:\"08:30 am\",exit:\"16:00 am\",timeDiff:\"04:00 am\",note:\"food\",attachments:\"08.02.2020_1.jpg\"},{date:\"09.02.2020\",entry:\"08:30 am\",exit:\"16:00 am\",note:\"transpotation\",attachments:[]},{date:\"10.02.2020\",entry:\"08:00 am\",exit:\"16:00 am\",note:\"entermainment\",attachments:[]}]},tData:[],selectedStudent:\"\",studentList:[],selectStudentTable:[],date:date,entry:\"\",exit:\"\",startDate:\"\",endDate:\"\",dateDiff:\"\",note:\"\",trainerNote:\"\",attachments:\"\",hours1:\"\",min1:\"\",hours2:\"\",min2:\"\",sec1:\"\",sec2:\"\",timeDiff:\"\",catchDate:false};_this.getDateDiff=_this.getDateDiff.bind(_assertThisInitialized(_this));//     this.HandleEnterTimeReset = this.HandleEnterTimeReset.bind(this);\n_this.HandleNote=_this.HandleNote.bind(_assertThisInitialized(_this));//     this.HandleAttachment = this.HandleAttachment.bind(this);\nreturn _this;}//   componentDidMount() {\n//     axios({\n//       method: \"get\",\n//       url: \"https://attrc.herokuapp.com/api/dashboard/\",\n//       headers: {\n//         \"Content-Type\": \"application/json\",\n//         \"x-auth-token\": localStorage.getItem(\"jwtToken\")\n//       }\n//     }).then(res => {\n//       const user = res.data.result.user;\n//       console.log(user);\n//       this.setState({ user: user });\n//       console.log(this.state.user);\n//     });\n//   }\n//   HandleEnterTimeReset(val, date) {\n//     //selected entrytime\n//     let entry = val;\n//     console.log(\"entry time\", entry);\n//     //selected date\n//     let entryDate = date;\n//     console.log(\"entry time date\", entryDate);\n//     let matchArr = [];\n//     let entryDates = this.state.tData.map(entryDate => {\n//       var entryDate = date;\n//       console.log(entryDate);\n//       matchArr = this.state.user.attendance.filter(val => {\n//         return val.date === entryDate;\n//       });\n//       if (matchArr.length > 0) {\n//         matchArr[0].entry = entry;\n//         this.setState({ attendance: [...matchArr] });\n//       }\n//       console.log(\"Entry reset matchArr\", matchArr);\n//       console.log(\"this.state.user.entry\", this.state.tData);\n//     });\n//     this.setState({\n//       entry: entry //to reset the entrytime to the state and send it to the trainer entry time\n//     });\n//   }\n_createClass(Dashboard,[{key:\"HandleNote\",value:function HandleNote(val,date){var _this2=this;var note=val;console.log(\"note val\",note);//pass the selected date from textedit from child component\nvar attDate=date;console.log(\"note val selected date\",attDate);var matchArr=[];var attDates=this.state.tData.map(function(attDate){var attDate=date;console.log(attDate);matchArr=_this2.state.user.attendance.filter(function(val){return val.date===attDate;});console.log(\"matchArr note update\",matchArr);if(matchArr.length>0){matchArr[0].note=note;_this2.setState({attendance:_toConsumableArray(matchArr),note:note});}});}// HandleAttachment(val, date) {\n//   let attachments = val;\n//   console.log(\"attachment value\", attachments);\n//   var fileDate = date;\n//   console.log(\"attachment date\", fileDate);\n//   let matchArr;\n//   let fileDates = this.state.tData.map((fileDate, i) => {\n//     matchArr = this.state.user.attendance.filter((val, i) => {\n//       return val.date === fileDate;\n//     });\n//     console.log(\"attachment final matchArr\", matchArr);\n//     if (matchArr.length > 0) {\n//       matchArr[0].attachments = attachments;\n//       this.setState({\n//         attendance: [...matchArr],\n//         attachments: attachments\n//       });\n//     }\n//   });\n// }\n},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"dashboard\"},React.createElement(\"h4\",null,\"Select your Data here\"),React.createElement(DateRange,{onClose:this.getDateDiff,dateDiff:this.state.dateDiff,startDate:this.state.startDate,endDate:this.state.endDate}),React.createElement(\"figure\",{style:{width:\"100vw\",height:\"80vh\",display:\"flex\",flexWrap:\"wrap\",justifyContent:\"center\"}},this.finalTable));}}]);return Dashboard;}(React.Component);export default Dashboard;","map":{"version":3,"sources":["/home/bea/Documents/bea/smart-money-pocket/src/components/dashboard.js"],"names":["React","Component","DateRange","Note","moment","Dashboard","getDateDiff","dateDiff","startDate","endDate","setState","tempData","finalTable","console","log","state","undefined","i","push","date","format","entry","note","attachments","tData","setDate","getDate","today","Date","attendance","match","cloneData","realDates","map","realDate","user","filter","val","length","noteResult","HandleNote","width","height","border","margin","alignItems","borderRadius","catchDate","studentTable","getFullYear","getMonth","firstname","lastname","email","exit","alert","timeDiff","selectedStudent","studentList","selectStudentTable","trainerNote","hours1","min1","hours2","min2","sec1","sec2","bind","attDate","matchArr","attDates","display","flexWrap","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport DateRange from \"./dateRangePicker\";\nimport Note from \"./note\";\nimport moment from \"moment\";\n\n// import axios from \"axios\";\n\nclass Dashboard extends React.Component {\n  constructor() {\n    super();\n    this.studentTable = [];\n    let today = new Date(),\n      date =\n        today.getFullYear() +\n        \"-\" +\n        (today.getMonth() + 1) +\n        \"-\" +\n        today.getDate();\n\n    this.state = {\n      user: {\n        //trainer self\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        attendance: [\n          {\n            date: \"01.02.2020\",\n            entry: \"10:39 am\",\n            exit: \"04:45 pm\",\n            note: \"train\",\n            attachments: []\n          },\n          {\n            date: \"02.02.2020\",\n            entry: \"12:00 am\",\n            exit: \"17:00 am\",\n            note: \"transpotation\",\n            attachments: []\n          },\n          {\n            date: \"03.02.2020\",\n            entry: \"11:00 am\",\n            exit: \"13:00 am\",\n            note: \"shisha\",\n            attachments: \"03.02.2020_1.jpg\",\n            alert: null\n          },\n          {\n            date: \"04.02.2020\",\n            entry: null,\n            exit: null,\n            note: \"transpotation\",\n            attachments: []\n          },\n          {\n            date: \"05.02.2020\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n            note: \"transpotation\",\n            attachments: []\n          },\n          {\n            date: \"06.02.2020\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n            note: \"transpotation\",\n            attachments: []\n          },\n          {\n            date: \"07.02.2020\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n\n            note: \"transpotation\",\n            attachments: []\n          },\n          {\n            date: \"08.02.2020\",\n            entry: \"08:30 am\",\n            exit: \"16:00 am\",\n            timeDiff: \"04:00 am\",\n\n            note: \"food\",\n            attachments: \"08.02.2020_1.jpg\"\n          },\n          {\n            date: \"09.02.2020\",\n            entry: \"08:30 am\",\n            exit: \"16:00 am\",\n\n            note: \"transpotation\",\n            attachments: []\n          },\n          {\n            date: \"10.02.2020\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n            note: \"entermainment\",\n            attachments: []\n          }\n        ]\n      },\n      tData: [],\n      selectedStudent: \"\",\n      studentList: [],\n      selectStudentTable: [],\n      date: date,\n      entry: \"\",\n      exit: \"\",\n      startDate: \"\",\n      endDate: \"\",\n      dateDiff: \"\",\n      note: \"\",\n      trainerNote: \"\",\n      attachments: \"\",\n      hours1: \"\",\n      min1: \"\",\n      hours2: \"\",\n      min2: \"\",\n      sec1: \"\",\n      sec2: \"\",\n      timeDiff: \"\",\n      catchDate: false\n    };\n\n    this.getDateDiff = this.getDateDiff.bind(this);\n    //     this.HandleEnterTimeReset = this.HandleEnterTimeReset.bind(this);\n    this.HandleNote = this.HandleNote.bind(this);\n    //     this.HandleAttachment = this.HandleAttachment.bind(this);\n  }\n\n  //   componentDidMount() {\n  //     axios({\n  //       method: \"get\",\n  //       url: \"https://attrc.herokuapp.com/api/dashboard/\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //         \"x-auth-token\": localStorage.getItem(\"jwtToken\")\n  //       }\n  //     }).then(res => {\n  //       const user = res.data.result.user;\n  //       console.log(user);\n  //       this.setState({ user: user });\n  //       console.log(this.state.user);\n  //     });\n  //   }\n\n  //   HandleEnterTimeReset(val, date) {\n  //     //selected entrytime\n  //     let entry = val;\n  //     console.log(\"entry time\", entry);\n\n  //     //selected date\n  //     let entryDate = date;\n  //     console.log(\"entry time date\", entryDate);\n\n  //     let matchArr = [];\n  //     let entryDates = this.state.tData.map(entryDate => {\n  //       var entryDate = date;\n  //       console.log(entryDate);\n  //       matchArr = this.state.user.attendance.filter(val => {\n  //         return val.date === entryDate;\n  //       });\n  //       if (matchArr.length > 0) {\n  //         matchArr[0].entry = entry;\n  //         this.setState({ attendance: [...matchArr] });\n  //       }\n  //       console.log(\"Entry reset matchArr\", matchArr);\n  //       console.log(\"this.state.user.entry\", this.state.tData);\n  //     });\n\n  //     this.setState({\n  //       entry: entry //to reset the entrytime to the state and send it to the trainer entry time\n  //     });\n  //   }\n\n  HandleNote(val, date) {\n    var note = val;\n    console.log(\"note val\", note);\n\n    //pass the selected date from textedit from child component\n    var attDate = date;\n    console.log(\"note val selected date\", attDate);\n\n    let matchArr = [];\n    let attDates = this.state.tData.map(attDate => {\n      var attDate = date;\n      console.log(attDate);\n      matchArr = this.state.user.attendance.filter(val => {\n        return val.date === attDate;\n      });\n      console.log(\"matchArr note update\", matchArr);\n      if (matchArr.length > 0) {\n        matchArr[0].note = note;\n        this.setState({ attendance: [...matchArr], note: note });\n      }\n    });\n  }\n\n  // HandleAttachment(val, date) {\n  //   let attachments = val;\n  //   console.log(\"attachment value\", attachments);\n\n  //   var fileDate = date;\n  //   console.log(\"attachment date\", fileDate);\n\n  //   let matchArr;\n  //   let fileDates = this.state.tData.map((fileDate, i) => {\n  //     matchArr = this.state.user.attendance.filter((val, i) => {\n  //       return val.date === fileDate;\n  //     });\n  //     console.log(\"attachment final matchArr\", matchArr);\n\n  //     if (matchArr.length > 0) {\n  //       matchArr[0].attachments = attachments;\n\n  //       this.setState({\n  //         attendance: [...matchArr],\n  //         attachments: attachments\n  //       });\n  //     }\n  //   });\n  // }\n\n  getDateDiff = (dateDiff, startDate, endDate) => {\n    this.setState({\n      dateDiff: dateDiff,\n      startDate: startDate,\n      endDate: endDate\n    });\n    var tempData = [];\n\n    this.finalTable = [];\n    console.log(\"diff\", this.state.dateDiff);\n    console.log(\"start\", this.state.startDate);\n    console.log(\"end\", this.state.endDate);\n\n    if (endDate !== undefined) {\n      for (let i = 0; i < this.state.dateDiff; i++) {\n        tempData.push({\n          date: moment(this.state.startDate).format(\"DD.MM.YYYY\"),\n          entry: null,\n          note: null,\n          attachments: null\n        });\n        console.log(\"diff\", this.state.dateDiff);\n        console.log(\"a1\", [...tempData]);\n        this.setState({\n          tData: [...tempData]\n        });\n        console.log(\"a2\", this.state.tData);\n        //for loop the real-time clicked data\n        if (startDate !== null) {\n          startDate.setDate(startDate.getDate() + 1);\n        } else {\n          let today = new Date();\n          return today;\n        }\n      }\n    } else {\n      tempData.push({\n        date: moment(this.state.startDate).format(\"DD.MM.YYYY\"),\n        entry: null,\n        note: null,\n        attachments: null\n      });\n      console.log(\"a1\", [...tempData]);\n      this.setState({\n        tData: [...tempData]\n      });\n      console.log(\"a2\", this.state.tData);\n    }\n\n    this.attendance = [];\n    let match;\n    let cloneData = [...this.state.tData];\n    //to map the function\n    let realDates = this.state.tData.map((realDate, i) => {\n      match = this.state.user.attendance.filter(val => {\n        return val.date === realDate.date;\n      });\n      console.log(\"realClick\", realDate.date);\n\n      if (match.length > 0) {\n        cloneData[i] = { ...match[0] };\n        this.setState({ tData: [...cloneData] });\n        console.log(\"final dummy data\", [...this.state.tData]);\n      }\n\n      // let selectEntryTimeResult;\n      // if (this.state.user.role == \"trainer\") {\n      //   selectEntryTimeResult = (\n      //     <EntryTimeSelect\n      //       onSave={this.HandleEnterTimeReset}\n      //       onChange={this.HandleEnterTimeReset}\n      //       entry={this.state.tData[i].entry}\n      //       value={realDate.date} //to match the rel click to the cliked date\n      //     />\n      //   );\n      // } else if (this.state.user.role == \"manager\") {\n      //   selectEntryTimeResult = (\n      //     <EntryTimeSelect\n      //       onSave={this.HandleEnterTimeReset}\n      //       onChange={this.HandleEnterTimeReset}\n      //       entry={this.state.tData[i].entry}\n      //       value={realDate.date} //to match the rel click to the cliked date\n      //     />\n      //   );\n      // } else {\n      //   selectEntryTimeResult = this.state.tData[i].entry;\n      // }\n\n      let noteResult;\n      noteResult = (\n        <Note\n          onClick={this.HandleNote}\n          onClose={this.HandleNote}\n          onChange={this.HandleNote}\n          note={this.state.tData[i].note}\n          onCancel={this.HandleNote}\n          value={realDate.date} //from getDateDiff event\n        />\n      );\n\n      // let uploadResult;\n      // if (this.state.user.role == \"attendee\") {\n      //   uploadResult = (\n      //     <Upload\n      //       onClick={this.HandleAttachment}\n      //       onChange={this.HandleAttachment}\n      //       attachments={this.state.tData[i].attachments}\n      //       value={realDate.date}\n      //     />\n      //   );\n      // } else if (this.state.user.role == \"trainer\") {\n      //   uploadResult = (\n      //     <Upload\n      //       onClick={this.HandleAttachment}\n      //       onChange={this.HandleAttachment}\n      //       attachments={this.state.tData[i].attachments}\n      //       value={realDate.date}\n      //     />\n      //   );\n      // } else if (this.state.user.role == \"manager\") {\n      //   uploadResult = (\n      //     <Upload\n      //       onClick={this.HandleAttachment}\n      //       onChange={this.HandleAttachment}\n      //       attachments={this.state.tData[i].attachments}\n      //       value={realDate.date}\n      //     />\n      //   );\n      // } else {\n      //   uploadResult = this.state.tData[i].attachments;\n      // }\n\n      this.finalTable.push(\n        <figcaption\n          style={{\n            width: \"20vw\",\n            height: \"40vh\",\n            border: \"1px solid grey\",\n            margin: \"1%\",\n            alignItems: \"center\",\n            borderRadius: \"10px\"\n          }}\n        >\n          <div>{this.state.tData[i].date}</div>\n\n          <div\n            style={{\n              width: \"20\",\n              height: \"70%\",\n              margin: \"1%\"\n            }}\n          >\n            {noteResult}\n          </div>\n          {/* <tr key={i} align=\"center\">\n          <td style={{ width: \"20\", border: \"1px solid grey\" }}>\n            {this.state.tData[i].date}\n          </td>\n          <td style={{ width: \"20\", border: \"1px solid grey\" }}>\n            {noteResult}\n          </td>\n\n         <td>{selectEntryTimeResult}</td>\n          <td>{noteResult}</td>\n          <td>{uploadResult}</td> \n        </tr> */}\n        </figcaption>\n      );\n\n      // startDate.setDate(startDate.getDate() + 1);\n      this.setState({\n        catchDate: true\n      });\n      console.log(\"realDate\", realDate.date);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"dashboard\">\n        <h4>Select your Data here</h4>\n        <DateRange\n          onClose={this.getDateDiff}\n          dateDiff={this.state.dateDiff}\n          startDate={this.state.startDate}\n          endDate={this.state.endDate}\n        />\n\n        {/* <table\n          style={{\n            marginLeft: \"20%\",\n            textAlign: \"center\",\n            width: \"50%\"\n          }}\n        > \n\n          {this.finalTable}\n\n         </table> */}\n\n        <figure\n          style={{\n            width: \"100vw\",\n            height: \"80vh\",\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            justifyContent: \"center\"\n          }}\n        >\n          {this.finalTable}\n        </figure>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}