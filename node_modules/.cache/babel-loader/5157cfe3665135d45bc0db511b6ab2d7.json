{"ast":null,"code":"import _objectSpread from \"/home/bea/Documents/bea/smart-money-pocket/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/bea/Documents/bea/smart-money-pocket/src/components/dashboard.js\";\nimport React, { Component } from \"react\";\nimport DateRange from \"./dateRangePicker\";\nimport Note from \"./note\";\nimport moment from \"moment\"; // import axios from \"axios\";\n\nclass Dashboard extends React.Component {\n  constructor() {\n    super();\n\n    this.getDateDiff = (dateDiff, startDate, endDate) => {\n      this.setState({\n        dateDiff: dateDiff,\n        startDate: startDate,\n        endDate: endDate\n      });\n      var tempData = [];\n      this.finalTable = [];\n      console.log(\"diff\", this.state.dateDiff);\n      console.log(\"start\", this.state.startDate);\n      console.log(\"end\", this.state.endDate);\n\n      if (endDate !== undefined) {\n        for (let i = 0; i < this.state.dateDiff; i++) {\n          tempData.push({\n            date: moment(this.state.startDate).format(\"DD.MM.YYYY\"),\n            entry: null,\n            note: null,\n            attachments: null\n          });\n          console.log(\"diff\", this.state.dateDiff);\n          console.log(\"a1\", [...tempData]);\n          this.setState({\n            tData: [...tempData]\n          });\n          console.log(\"a2\", this.state.tData); //for loop the real-time clicked data\n\n          if (startDate !== null) {\n            startDate.setDate(startDate.getDate() + 1);\n          } else {\n            let today = new Date();\n            return today;\n          }\n        }\n      } else {\n        tempData.push({\n          date: moment(this.state.startDate).format(\"DD.MM.YYYY\"),\n          entry: null,\n          note: null,\n          attachments: null\n        });\n        console.log(\"a1\", [...tempData]);\n        this.setState({\n          tData: [...tempData]\n        });\n        console.log(\"a2\", this.state.tData);\n      }\n\n      this.attendance = [];\n      let match;\n      let cloneData = [...this.state.tData]; //to map the function\n\n      let realDates = this.state.tData.map((realDate, i) => {\n        match = this.state.user.attendance.filter(val => {\n          return val.date === realDate.date;\n        });\n        console.log(\"realClick\", realDate.date);\n\n        if (match.length > 0) {\n          cloneData[i] = _objectSpread({}, match[0]);\n          this.setState({\n            tData: [...cloneData]\n          });\n          console.log(\"final dummy data\", [...this.state.tData]);\n        } // let selectEntryTimeResult;\n        // if (this.state.user.role == \"trainer\") {\n        //   selectEntryTimeResult = (\n        //     <EntryTimeSelect\n        //       onSave={this.HandleEnterTimeReset}\n        //       onChange={this.HandleEnterTimeReset}\n        //       entry={this.state.tData[i].entry}\n        //       value={realDate.date} //to match the rel click to the cliked date\n        //     />\n        //   );\n        // } else if (this.state.user.role == \"manager\") {\n        //   selectEntryTimeResult = (\n        //     <EntryTimeSelect\n        //       onSave={this.HandleEnterTimeReset}\n        //       onChange={this.HandleEnterTimeReset}\n        //       entry={this.state.tData[i].entry}\n        //       value={realDate.date} //to match the rel click to the cliked date\n        //     />\n        //   );\n        // } else {\n        //   selectEntryTimeResult = this.state.tData[i].entry;\n        // }\n\n\n        let noteResult;\n        noteResult = React.createElement(Note, {\n          onClick: this.HandleNote,\n          onClose: this.HandleNote,\n          onChange: this.HandleNote,\n          note: this.state.tData[i].note,\n          onCancel: this.HandleNote,\n          value: realDate.date //from getDateDiff event\n          ,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 319\n          },\n          __self: this\n        }); // let uploadResult;\n        // if (this.state.user.role == \"attendee\") {\n        //   uploadResult = (\n        //     <Upload\n        //       onClick={this.HandleAttachment}\n        //       onChange={this.HandleAttachment}\n        //       attachments={this.state.tData[i].attachments}\n        //       value={realDate.date}\n        //     />\n        //   );\n        // } else if (this.state.user.role == \"trainer\") {\n        //   uploadResult = (\n        //     <Upload\n        //       onClick={this.HandleAttachment}\n        //       onChange={this.HandleAttachment}\n        //       attachments={this.state.tData[i].attachments}\n        //       value={realDate.date}\n        //     />\n        //   );\n        // } else if (this.state.user.role == \"manager\") {\n        //   uploadResult = (\n        //     <Upload\n        //       onClick={this.HandleAttachment}\n        //       onChange={this.HandleAttachment}\n        //       attachments={this.state.tData[i].attachments}\n        //       value={realDate.date}\n        //     />\n        //   );\n        // } else {\n        //   uploadResult = this.state.tData[i].attachments;\n        // }\n\n        this.finalTable.push(React.createElement(\"figcaption\", {\n          style: {\n            width: \"20vw\",\n            height: \"20vh\",\n            border: \"1px solid grey\",\n            margin: \"1%\",\n            alignItems: \"center\",\n            borderRadius: \"10px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 362\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 372\n          },\n          __self: this\n        }, this.state.tData[i].date), React.createElement(\"div\", {\n          style: {\n            width: \"20\",\n            height: \"70%\",\n            margin: \"1%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373\n          },\n          __self: this\n        }, noteResult))); // startDate.setDate(startDate.getDate() + 1);\n\n        this.setState({\n          catchDate: true\n        });\n        console.log(\"realDate\", realDate.date);\n      });\n    };\n\n    this.studentTable = [];\n\n    let _today = new Date(),\n        date = _today.getFullYear() + \"-\" + (_today.getMonth() + 1) + \"-\" + _today.getDate();\n\n    this.state = {\n      user: {\n        //trainer self\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        attendance: [{\n          date: \"01.01.2019\",\n          entry: \"10:39 am\",\n          exit: \"04:45 pm\",\n          note: \"late train\",\n          attachments: []\n        }, {\n          date: \"02.01.2019\",\n          entry: \"12:00 am\",\n          exit: \"17:00 am\",\n          note: null,\n          attachments: []\n        }, {\n          date: \"03.01.2019\",\n          entry: \"11:00 am\",\n          exit: \"13:00 am\",\n          note: \"Bus was late. Plase find enclosed attachments\",\n          attachments: \"03.01.2019_1.jpg\",\n          alert: null\n        }, {\n          date: \"04.01.2019\",\n          entry: null,\n          exit: null,\n          note: null,\n          attachments: []\n        }, {\n          date: \"05.01.2019\",\n          entry: \"08:00 am\",\n          exit: \"16:00 am\",\n          note: null,\n          attachments: []\n        }, {\n          date: \"06.01.2019\",\n          entry: \"08:00 am\",\n          exit: \"16:00 am\",\n          note: null,\n          attachments: []\n        }, {\n          date: \"07.01.2019\",\n          entry: \"08:00 am\",\n          exit: \"16:00 am\",\n          note: null,\n          attachments: []\n        }, {\n          date: \"08.01.2019\",\n          entry: \"08:30 am\",\n          exit: \"16:00 am\",\n          timeDiff: \"04:00 am\",\n          note: \"food\",\n          attachments: \"08.01.2019_1.jpg\"\n        }, {\n          date: \"09.01.2019\",\n          entry: \"08:30 am\",\n          exit: \"16:00 am\",\n          note: null,\n          attachments: []\n        }, {\n          date: \"10.01.2019\",\n          entry: \"08:00 am\",\n          exit: \"16:00 am\",\n          note: \"entermainment\",\n          attachments: []\n        }]\n      },\n      tData: [],\n      selectedStudent: \"\",\n      studentList: [],\n      selectStudentTable: [],\n      date: date,\n      entry: \"\",\n      exit: \"\",\n      startDate: \"\",\n      endDate: \"\",\n      dateDiff: \"\",\n      note: \"\",\n      trainerNote: \"\",\n      attachments: \"\",\n      hours1: \"\",\n      min1: \"\",\n      hours2: \"\",\n      min2: \"\",\n      sec1: \"\",\n      sec2: \"\",\n      timeDiff: \"\",\n      catchDate: false\n    };\n    this.getDateDiff = this.getDateDiff.bind(this); //     this.HandleEnterTimeReset = this.HandleEnterTimeReset.bind(this);\n\n    this.HandleNote = this.HandleNote.bind(this); //     this.HandleAttachment = this.HandleAttachment.bind(this);\n  } //   componentDidMount() {\n  //     axios({\n  //       method: \"get\",\n  //       url: \"https://attrc.herokuapp.com/api/dashboard/\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //         \"x-auth-token\": localStorage.getItem(\"jwtToken\")\n  //       }\n  //     }).then(res => {\n  //       const user = res.data.result.user;\n  //       console.log(user);\n  //       this.setState({ user: user });\n  //       console.log(this.state.user);\n  //     });\n  //   }\n  //   HandleEnterTimeReset(val, date) {\n  //     //selected entrytime\n  //     let entry = val;\n  //     console.log(\"entry time\", entry);\n  //     //selected date\n  //     let entryDate = date;\n  //     console.log(\"entry time date\", entryDate);\n  //     let matchArr = [];\n  //     let entryDates = this.state.tData.map(entryDate => {\n  //       var entryDate = date;\n  //       console.log(entryDate);\n  //       matchArr = this.state.user.attendance.filter(val => {\n  //         return val.date === entryDate;\n  //       });\n  //       if (matchArr.length > 0) {\n  //         matchArr[0].entry = entry;\n  //         this.setState({ attendance: [...matchArr] });\n  //       }\n  //       console.log(\"Entry reset matchArr\", matchArr);\n  //       console.log(\"this.state.user.entry\", this.state.tData);\n  //     });\n  //     this.setState({\n  //       entry: entry //to reset the entrytime to the state and send it to the trainer entry time\n  //     });\n  //   }\n\n\n  HandleNote(val, date) {\n    var note = val;\n    console.log(\"note val\", note); //pass the selected date from textedit from child component\n\n    var attDate = date;\n    console.log(\"note val selected date\", attDate);\n    let matchArr = [];\n    let attDates = this.state.tData.map(attDate => {\n      var attDate = date;\n      console.log(attDate);\n      matchArr = this.state.user.attendance.filter(val => {\n        return val.date === attDate;\n      });\n      console.log(\"matchArr note update\", matchArr);\n\n      if (matchArr.length > 0) {\n        matchArr[0].note = note;\n        this.setState({\n          attendance: [...matchArr],\n          note: note\n        });\n      }\n    });\n  } // HandleAttachment(val, date) {\n  //   let attachments = val;\n  //   console.log(\"attachment value\", attachments);\n  //   var fileDate = date;\n  //   console.log(\"attachment date\", fileDate);\n  //   let matchArr;\n  //   let fileDates = this.state.tData.map((fileDate, i) => {\n  //     matchArr = this.state.user.attendance.filter((val, i) => {\n  //       return val.date === fileDate;\n  //     });\n  //     console.log(\"attachment final matchArr\", matchArr);\n  //     if (matchArr.length > 0) {\n  //       matchArr[0].attachments = attachments;\n  //       this.setState({\n  //         attendance: [...matchArr],\n  //         attachments: attachments\n  //       });\n  //     }\n  //   });\n  // }\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"dashboard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }, \"Select your Data here\"), React.createElement(DateRange, {\n      onClose: this.getDateDiff,\n      dateDiff: this.state.dateDiff,\n      startDate: this.state.startDate,\n      endDate: this.state.endDate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }), React.createElement(\"figure\", {\n      style: {\n        width: \"100vw\",\n        height: \"80vh\",\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        justifyContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, this.finalTable));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/home/bea/Documents/bea/smart-money-pocket/src/components/dashboard.js"],"names":["React","Component","DateRange","Note","moment","Dashboard","constructor","getDateDiff","dateDiff","startDate","endDate","setState","tempData","finalTable","console","log","state","undefined","i","push","date","format","entry","note","attachments","tData","setDate","getDate","today","Date","attendance","match","cloneData","realDates","map","realDate","user","filter","val","length","noteResult","HandleNote","width","height","border","margin","alignItems","borderRadius","catchDate","studentTable","getFullYear","getMonth","firstname","lastname","email","exit","alert","timeDiff","selectedStudent","studentList","selectStudentTable","trainerNote","hours1","min1","hours2","min2","sec1","sec2","bind","attDate","matchArr","attDates","render","display","flexWrap","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport DateRange from \"./dateRangePicker\";\nimport Note from \"./note\";\nimport moment from \"moment\";\n\n// import axios from \"axios\";\n\nclass Dashboard extends React.Component {\n  constructor() {\n    super();\n    this.studentTable = [];\n    let today = new Date(),\n      date =\n        today.getFullYear() +\n        \"-\" +\n        (today.getMonth() + 1) +\n        \"-\" +\n        today.getDate();\n\n    this.state = {\n      user: {\n        //trainer self\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        attendance: [\n          {\n            date: \"01.01.2019\",\n            entry: \"10:39 am\",\n            exit: \"04:45 pm\",\n            note: \"late train\",\n            attachments: []\n          },\n          {\n            date: \"02.01.2019\",\n            entry: \"12:00 am\",\n            exit: \"17:00 am\",\n            note: null,\n            attachments: []\n          },\n          {\n            date: \"03.01.2019\",\n            entry: \"11:00 am\",\n            exit: \"13:00 am\",\n            note: \"Bus was late. Plase find enclosed attachments\",\n            attachments: \"03.01.2019_1.jpg\",\n            alert: null\n          },\n          {\n            date: \"04.01.2019\",\n            entry: null,\n            exit: null,\n            note: null,\n            attachments: []\n          },\n          {\n            date: \"05.01.2019\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n\n            note: null,\n            attachments: []\n          },\n          {\n            date: \"06.01.2019\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n\n            note: null,\n            attachments: []\n          },\n          {\n            date: \"07.01.2019\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n\n            note: null,\n            attachments: []\n          },\n          {\n            date: \"08.01.2019\",\n            entry: \"08:30 am\",\n            exit: \"16:00 am\",\n            timeDiff: \"04:00 am\",\n\n            note: \"food\",\n            attachments: \"08.01.2019_1.jpg\"\n          },\n          {\n            date: \"09.01.2019\",\n            entry: \"08:30 am\",\n            exit: \"16:00 am\",\n\n            note: null,\n            attachments: []\n          },\n          {\n            date: \"10.01.2019\",\n            entry: \"08:00 am\",\n            exit: \"16:00 am\",\n\n            note: \"entermainment\",\n            attachments: []\n          }\n        ]\n      },\n      tData: [],\n      selectedStudent: \"\",\n      studentList: [],\n      selectStudentTable: [],\n      date: date,\n      entry: \"\",\n      exit: \"\",\n      startDate: \"\",\n      endDate: \"\",\n      dateDiff: \"\",\n      note: \"\",\n      trainerNote: \"\",\n      attachments: \"\",\n      hours1: \"\",\n      min1: \"\",\n      hours2: \"\",\n      min2: \"\",\n      sec1: \"\",\n      sec2: \"\",\n      timeDiff: \"\",\n      catchDate: false\n    };\n\n    this.getDateDiff = this.getDateDiff.bind(this);\n    //     this.HandleEnterTimeReset = this.HandleEnterTimeReset.bind(this);\n    this.HandleNote = this.HandleNote.bind(this);\n    //     this.HandleAttachment = this.HandleAttachment.bind(this);\n  }\n\n  //   componentDidMount() {\n  //     axios({\n  //       method: \"get\",\n  //       url: \"https://attrc.herokuapp.com/api/dashboard/\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //         \"x-auth-token\": localStorage.getItem(\"jwtToken\")\n  //       }\n  //     }).then(res => {\n  //       const user = res.data.result.user;\n  //       console.log(user);\n  //       this.setState({ user: user });\n  //       console.log(this.state.user);\n  //     });\n  //   }\n\n  //   HandleEnterTimeReset(val, date) {\n  //     //selected entrytime\n  //     let entry = val;\n  //     console.log(\"entry time\", entry);\n\n  //     //selected date\n  //     let entryDate = date;\n  //     console.log(\"entry time date\", entryDate);\n\n  //     let matchArr = [];\n  //     let entryDates = this.state.tData.map(entryDate => {\n  //       var entryDate = date;\n  //       console.log(entryDate);\n  //       matchArr = this.state.user.attendance.filter(val => {\n  //         return val.date === entryDate;\n  //       });\n  //       if (matchArr.length > 0) {\n  //         matchArr[0].entry = entry;\n  //         this.setState({ attendance: [...matchArr] });\n  //       }\n  //       console.log(\"Entry reset matchArr\", matchArr);\n  //       console.log(\"this.state.user.entry\", this.state.tData);\n  //     });\n\n  //     this.setState({\n  //       entry: entry //to reset the entrytime to the state and send it to the trainer entry time\n  //     });\n  //   }\n\n  HandleNote(val, date) {\n    var note = val;\n    console.log(\"note val\", note);\n\n    //pass the selected date from textedit from child component\n    var attDate = date;\n    console.log(\"note val selected date\", attDate);\n\n    let matchArr = [];\n    let attDates = this.state.tData.map(attDate => {\n      var attDate = date;\n      console.log(attDate);\n      matchArr = this.state.user.attendance.filter(val => {\n        return val.date === attDate;\n      });\n      console.log(\"matchArr note update\", matchArr);\n      if (matchArr.length > 0) {\n        matchArr[0].note = note;\n        this.setState({ attendance: [...matchArr], note: note });\n      }\n    });\n  }\n\n  // HandleAttachment(val, date) {\n  //   let attachments = val;\n  //   console.log(\"attachment value\", attachments);\n\n  //   var fileDate = date;\n  //   console.log(\"attachment date\", fileDate);\n\n  //   let matchArr;\n  //   let fileDates = this.state.tData.map((fileDate, i) => {\n  //     matchArr = this.state.user.attendance.filter((val, i) => {\n  //       return val.date === fileDate;\n  //     });\n  //     console.log(\"attachment final matchArr\", matchArr);\n\n  //     if (matchArr.length > 0) {\n  //       matchArr[0].attachments = attachments;\n\n  //       this.setState({\n  //         attendance: [...matchArr],\n  //         attachments: attachments\n  //       });\n  //     }\n  //   });\n  // }\n\n  getDateDiff = (dateDiff, startDate, endDate) => {\n    this.setState({\n      dateDiff: dateDiff,\n      startDate: startDate,\n      endDate: endDate\n    });\n    var tempData = [];\n\n    this.finalTable = [];\n    console.log(\"diff\", this.state.dateDiff);\n    console.log(\"start\", this.state.startDate);\n    console.log(\"end\", this.state.endDate);\n\n    if (endDate !== undefined) {\n      for (let i = 0; i < this.state.dateDiff; i++) {\n        tempData.push({\n          date: moment(this.state.startDate).format(\"DD.MM.YYYY\"),\n          entry: null,\n          note: null,\n          attachments: null\n        });\n        console.log(\"diff\", this.state.dateDiff);\n        console.log(\"a1\", [...tempData]);\n        this.setState({\n          tData: [...tempData]\n        });\n        console.log(\"a2\", this.state.tData);\n        //for loop the real-time clicked data\n        if (startDate !== null) {\n          startDate.setDate(startDate.getDate() + 1);\n        } else {\n          let today = new Date();\n          return today;\n        }\n      }\n    } else {\n      tempData.push({\n        date: moment(this.state.startDate).format(\"DD.MM.YYYY\"),\n        entry: null,\n        note: null,\n        attachments: null\n      });\n      console.log(\"a1\", [...tempData]);\n      this.setState({\n        tData: [...tempData]\n      });\n      console.log(\"a2\", this.state.tData);\n    }\n\n    this.attendance = [];\n    let match;\n    let cloneData = [...this.state.tData];\n    //to map the function\n    let realDates = this.state.tData.map((realDate, i) => {\n      match = this.state.user.attendance.filter(val => {\n        return val.date === realDate.date;\n      });\n      console.log(\"realClick\", realDate.date);\n\n      if (match.length > 0) {\n        cloneData[i] = { ...match[0] };\n        this.setState({ tData: [...cloneData] });\n        console.log(\"final dummy data\", [...this.state.tData]);\n      }\n\n      // let selectEntryTimeResult;\n      // if (this.state.user.role == \"trainer\") {\n      //   selectEntryTimeResult = (\n      //     <EntryTimeSelect\n      //       onSave={this.HandleEnterTimeReset}\n      //       onChange={this.HandleEnterTimeReset}\n      //       entry={this.state.tData[i].entry}\n      //       value={realDate.date} //to match the rel click to the cliked date\n      //     />\n      //   );\n      // } else if (this.state.user.role == \"manager\") {\n      //   selectEntryTimeResult = (\n      //     <EntryTimeSelect\n      //       onSave={this.HandleEnterTimeReset}\n      //       onChange={this.HandleEnterTimeReset}\n      //       entry={this.state.tData[i].entry}\n      //       value={realDate.date} //to match the rel click to the cliked date\n      //     />\n      //   );\n      // } else {\n      //   selectEntryTimeResult = this.state.tData[i].entry;\n      // }\n\n      let noteResult;\n      noteResult = (\n        <Note\n          onClick={this.HandleNote}\n          onClose={this.HandleNote}\n          onChange={this.HandleNote}\n          note={this.state.tData[i].note}\n          onCancel={this.HandleNote}\n          value={realDate.date} //from getDateDiff event\n        />\n      );\n\n      // let uploadResult;\n      // if (this.state.user.role == \"attendee\") {\n      //   uploadResult = (\n      //     <Upload\n      //       onClick={this.HandleAttachment}\n      //       onChange={this.HandleAttachment}\n      //       attachments={this.state.tData[i].attachments}\n      //       value={realDate.date}\n      //     />\n      //   );\n      // } else if (this.state.user.role == \"trainer\") {\n      //   uploadResult = (\n      //     <Upload\n      //       onClick={this.HandleAttachment}\n      //       onChange={this.HandleAttachment}\n      //       attachments={this.state.tData[i].attachments}\n      //       value={realDate.date}\n      //     />\n      //   );\n      // } else if (this.state.user.role == \"manager\") {\n      //   uploadResult = (\n      //     <Upload\n      //       onClick={this.HandleAttachment}\n      //       onChange={this.HandleAttachment}\n      //       attachments={this.state.tData[i].attachments}\n      //       value={realDate.date}\n      //     />\n      //   );\n      // } else {\n      //   uploadResult = this.state.tData[i].attachments;\n      // }\n\n      this.finalTable.push(\n        <figcaption\n          style={{\n            width: \"20vw\",\n            height: \"20vh\",\n            border: \"1px solid grey\",\n            margin: \"1%\",\n            alignItems: \"center\",\n            borderRadius: \"10px\"\n          }}\n        >\n          <div>{this.state.tData[i].date}</div>\n          <div\n            style={{\n              width: \"20\",\n              height: \"70%\",\n              margin: \"1%\"\n            }}\n          >\n            {noteResult}\n          </div>\n          {/* <tr key={i} align=\"center\">\n          <td style={{ width: \"20\", border: \"1px solid grey\" }}>\n            {this.state.tData[i].date}\n          </td>\n          <td style={{ width: \"20\", border: \"1px solid grey\" }}>\n            {noteResult}\n          </td>\n\n         <td>{selectEntryTimeResult}</td>\n          <td>{noteResult}</td>\n          <td>{uploadResult}</td> \n        </tr> */}\n        </figcaption>\n      );\n\n      // startDate.setDate(startDate.getDate() + 1);\n      this.setState({\n        catchDate: true\n      });\n      console.log(\"realDate\", realDate.date);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"dashboard\">\n        <h4>Select your Data here</h4>\n        <DateRange\n          onClose={this.getDateDiff}\n          dateDiff={this.state.dateDiff}\n          startDate={this.state.startDate}\n          endDate={this.state.endDate}\n        />\n\n        {/* <table\n          style={{\n            marginLeft: \"20%\",\n            textAlign: \"center\",\n            width: \"50%\"\n          }}\n        > \n\n          {this.finalTable}\n\n         </table> */}\n\n        <figure\n          style={{\n            width: \"100vw\",\n            height: \"80vh\",\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            justifyContent: \"center\"\n          }}\n        >\n          {this.finalTable}\n        </figure>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}